<Window x:Class="CineFlix_WPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:CineFlix_WPF"
        mc:Ignorable="d"
        Title="CineFlix - Film Management" 
        Height="700" Width="1200"
        WindowStartupLocation="CenterScreen"
        WindowState="Maximized"
        Style="{StaticResource WindowStyle}">

    

    <DockPanel>
        <!-- Menu Bar -->
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="_Bestand">
                <MenuItem Header="_Uitloggen" Click="LogoutMenuItem_Click"/>
                <Separator/>
                <MenuItem Header="_Afsluiten" Click="ExitMenuItem_Click"/>
            </MenuItem>
            <MenuItem Header="_Navigatie">
                <MenuItem Header="📽️ Films" Click="FilmsMenuItem_Click"/>
                <MenuItem Header="🎬 Regisseurs" Click="RegisseursMenuItem_Click"/>
                <MenuItem Header="🎭 Genres" Click="GenresMenuItem_Click"/>
                <MenuItem x:Name="RolesMenuItem" Header="👥 Rollen" Click="RolesMenuItem_Click" Visibility="Collapsed"/>
            </MenuItem>
            <MenuItem Header="_Help">
                <MenuItem Header="ℹ️ Over" Click="AboutMenuItem_Click"/>
            </MenuItem>
        </Menu>

        <!-- Status Bar -->
        <StatusBar DockPanel.Dock="Bottom">
            <StatusBarItem>
                <TextBlock x:Name="StatusUserText" Text="Gebruiker: -"/>
            </StatusBarItem>
            <Separator/>
            <StatusBarItem>
                <TextBlock x:Name="StatusRoleText" Text="Rol: -"/>
            </StatusBarItem>
            <Separator/>
            <StatusBarItem HorizontalAlignment="Right">
                <TextBlock x:Name="StatusTimeText" Text="00:00:00"/>
            </StatusBarItem>
        </StatusBar>

        <!-- Main Content -->
        <TabControl x:Name="MainTabControl" Style="{StaticResource TabControlStyle}" Margin="10">
            <!-- Dashboard Tab -->
            <TabItem Header="📊 Dashboard" Style="{StaticResource TabItemStyle}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <Grid Margin="20">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <!-- Title -->
                        <TextBlock Grid.Row="0" Text="Dashboard" Style="{StaticResource TitleStyle}"/>

                        <!-- Statistics Cards -->
                        <UniformGrid Grid.Row="1" Rows="1" Columns="4" Margin="0,20,0,20">
                            <!-- Total Films -->
                            <Border Background="#3498DB" Margin="5" Padding="20" CornerRadius="5">
                                <StackPanel>
                                    <TextBlock Text="📽️" FontSize="32" HorizontalAlignment="Center" Foreground="White"/>
                                    <TextBlock x:Name="TotalFilmsText" Text="0" FontSize="36" FontWeight="Bold" 
                                              HorizontalAlignment="Center" Foreground="White" Margin="0,10,0,0"/>
                                    <TextBlock Text="Totaal Films" HorizontalAlignment="Center" Foreground="White" FontSize="14"/>
                                </StackPanel>
                            </Border>

                            <!-- Total Regisseurs -->
                            <Border Background="#9B59B6" Margin="5" Padding="20" CornerRadius="5">
                                <StackPanel>
                                    <TextBlock Text="🎬" FontSize="32" HorizontalAlignment="Center" Foreground="White"/>
                                    <TextBlock x:Name="TotalRegisseursText" Text="0" FontSize="36" FontWeight="Bold" 
                                              HorizontalAlignment="Center" Foreground="White" Margin="0,10,0,0"/>
                                    <TextBlock Text="Totaal Regisseurs" HorizontalAlignment="Center" Foreground="White" FontSize="14"/>
                                </StackPanel>
                            </Border>

                            <!-- Total Genres -->
                            <Border Background="#E67E22" Margin="5" Padding="20" CornerRadius="5">
                                <StackPanel>
                                    <TextBlock Text="🎭" FontSize="32" HorizontalAlignment="Center" Foreground="White"/>
                                    <TextBlock x:Name="TotalGenresText" Text="0" FontSize="36" FontWeight="Bold" 
                                              HorizontalAlignment="Center" Foreground="White" Margin="0,10,0,0"/>
                                    <TextBlock Text="Totaal Genres" HorizontalAlignment="Center" Foreground="White" FontSize="14"/>
                                </StackPanel>
                            </Border>

                            <!-- Average Rating -->
                            <Border Background="#27AE60" Margin="5" Padding="20" CornerRadius="5">
                                <StackPanel>
                                    <TextBlock Text="⭐" FontSize="32" HorizontalAlignment="Center" Foreground="White"/>
                                    <TextBlock x:Name="AverageRatingText" Text="0.0" FontSize="36" FontWeight="Bold" 
                                              HorizontalAlignment="Center" Foreground="White" Margin="0,10,0,0"/>
                                    <TextBlock Text="Gemiddelde Rating" HorizontalAlignment="Center" Foreground="White" FontSize="14"/>
                                </StackPanel>
                            </Border>
                        </UniformGrid>

                        <!-- Recent Films -->
                        <Border Grid.Row="2" BorderBrush="#BDC3C7" BorderThickness="1" Padding="15" CornerRadius="5">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>

                                <TextBlock Grid.Row="0" Text="📽️ Recent Toegevoegde Films" 
                                          FontSize="18" FontWeight="Bold" Margin="0,0,0,10"/>

                                <DataGrid Grid.Row="1" x:Name="RecentFilmsDataGrid"
                                         Style="{StaticResource DataGridStyle}"
                                         AutoGenerateColumns="False"
                                         IsReadOnly="True"
                                         CanUserAddRows="False">
                                    <DataGrid.Columns>
                                        <DataGridTextColumn Header="Titel" Binding="{Binding Titel}" Width="2*"/>
                                        <DataGridTextColumn Header="Jaar" Binding="{Binding Releasejaar}" Width="80"/>
                                        <DataGridTextColumn Header="Regisseur" Binding="{Binding Regisseur.Naam}" Width="*"/>
                                        <DataGridTextColumn Header="Rating" Binding="{Binding Rating}" Width="100"/>
                                    </DataGrid.Columns>
                                </DataGrid>
                            </Grid>
                        </Border>
                    </Grid>
                </ScrollViewer>
            </TabItem>

            <!-- Films Tab -->
            <TabItem Header="📽️ Films" Style="{StaticResource TabItemStyle}">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Title -->
                    <TextBlock Grid.Row="0" Text="Film Beheer" Style="{StaticResource TitleStyle}"/>

                    <!-- Search and Filter Bar -->
                    <Border Grid.Row="1" Margin="0,10,0,10" Padding="10" Background="#ECF0F1" CornerRadius="5">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <Label Grid.Column="0" Content="Zoeken:" Style="{StaticResource LabelStyle}"/>
                            <TextBox Grid.Column="1" x:Name="FilmSearchBox" 
                                    Style="{StaticResource InputTextBoxStyle}"
                                    Margin="5,0,10,0"/>

                            <ComboBox Grid.Column="2" x:Name="GenreFilterComboBox"
                                     Style="{StaticResource InputComboBoxStyle}"
                                     DisplayMemberPath="GenreNaam"
                                     Width="150"
                                     Margin="0,0,10,0"
                                     SelectionChanged="GenreFilterComboBox_SelectionChanged"/>

                            <ComboBox Grid.Column="3" x:Name="RegisseurFilterComboBox"
                                     Style="{StaticResource InputComboBoxStyle}"
                                     DisplayMemberPath="Naam"
                                     Width="150"
                                     Margin="0,0,10,0"
                                     SelectionChanged="RegisseurFilterComboBox_SelectionChanged"/>

                            <Button Grid.Column="4" Content="🔍 Zoeken" 
                                   Style="{StaticResource PrimaryButtonStyle}"
                                   Margin="0,0,5,0"
                                   Click="SearchFilmsButton_Click"/>

                            <Button Grid.Column="5" Content="➕ Nieuwe Film" 
                                   Style="{StaticResource SecondaryButtonStyle}"
                                   Click="AddFilmButton_Click"/>
                        </Grid>
                    </Border>

                    <!-- Films DataGrid -->
                    <DataGrid Grid.Row="2" x:Name="FilmsDataGrid" 
                             Style="{StaticResource DataGridStyle}"
                             AutoGenerateColumns="False"
                             CanUserAddRows="False"
                             MouseDoubleClick="FilmsDataGrid_MouseDoubleClick">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Titel" Binding="{Binding Titel}" Width="2*"/>
                            <DataGridTextColumn Header="Jaar" Binding="{Binding Releasejaar}" Width="80"/>
                            <DataGridTextColumn Header="Duur" Binding="{Binding DuurFormatted}" Width="100"/>
                            <DataGridTextColumn Header="Regisseur" Binding="{Binding Regisseur.Naam}" Width="*"/>
                            <DataGridTextColumn Header="Genres" Binding="{Binding FilmGenres}" Width="*"/>
                            <DataGridTextColumn Header="Rating" Binding="{Binding Rating}" Width="100"/>
                            <DataGridTemplateColumn Header="Acties" Width="150">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <Button Content="✏️" ToolTip="Bewerken" 
                                                   Click="EditFilmButton_Click"
                                                   Tag="{Binding}"
                                                   Margin="2"/>
                                            <Button Content="🗑️" ToolTip="Verwijderen" 
                                                   Click="DeleteFilmButton_Click"
                                                   Tag="{Binding}"
                                                   Margin="2"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>

            <!-- Regisseurs Tab -->
            <TabItem Header="🎬 Regisseurs" Style="{StaticResource TabItemStyle}">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Title -->
                    <TextBlock Grid.Row="0" Text="Regisseur Beheer" Style="{StaticResource TitleStyle}"/>

                    <!-- Action Bar -->
                    <Border Grid.Row="1" Margin="0,10,0,10" Padding="10" Background="#ECF0F1" CornerRadius="5">
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <Button Content="➕ Nieuwe Regisseur" 
                                   Style="{StaticResource PrimaryButtonStyle}"
                                   Click="AddRegisseurButton_Click"/>
                        </StackPanel>
                    </Border>

                    <!-- Regisseurs DataGrid -->
                    <DataGrid Grid.Row="2" x:Name="RegisseursDataGrid" 
                             Style="{StaticResource DataGridStyle}"
                             AutoGenerateColumns="False"
                             CanUserAddRows="False">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Naam" Binding="{Binding Naam}" Width="2*"/>
                            <DataGridTextColumn Header="Geboortejaar" Binding="{Binding Geboortejaar}" Width="*"/>
                            <DataGridTextColumn Header="Nationaliteit" Binding="{Binding Nationaliteit}" Width="*"/>
                            <DataGridTextColumn Header="Aantal Films" Binding="{Binding Films.Count}" Width="100"/>
                            <DataGridTemplateColumn Header="Acties" Width="150">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <Button Content="✏️" ToolTip="Bewerken" 
                                                   Click="EditRegisseurButton_Click"
                                                   Tag="{Binding}"
                                                   Margin="2"/>
                                            <Button Content="🗑️" ToolTip="Verwijderen" 
                                                   Click="DeleteRegisseurButton_Click"
                                                   Tag="{Binding}"
                                                   Margin="2"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>

            <!-- Genres Tab -->
            <TabItem Header="🎭 Genres" Style="{StaticResource TabItemStyle}">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Title -->
                    <TextBlock Grid.Row="0" Text="Genre Beheer" Style="{StaticResource TitleStyle}"/>

                    <!-- Action Bar -->
                    <Border Grid.Row="1" Margin="0,10,0,10" Padding="10" Background="#ECF0F1" CornerRadius="5">
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <Button Content="➕ Nieuw Genre" 
                                   Style="{StaticResource PrimaryButtonStyle}"
                                   Click="AddGenreButton_Click"/>
                        </StackPanel>
                    </Border>

                    <!-- Genres DataGrid -->
                    <DataGrid Grid.Row="2" x:Name="GenresDataGrid" 
                             Style="{StaticResource DataGridStyle}"
                             AutoGenerateColumns="False"
                             CanUserAddRows="False">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Genre Naam" Binding="{Binding GenreNaam}" Width="2*"/>
                            <DataGridTextColumn Header="Beschrijving" Binding="{Binding Beschrijving}" Width="3*"/>
                            <DataGridTextColumn Header="Aantal Films" Binding="{Binding FilmGenres.Count}" Width="100"/>
                            <DataGridTemplateColumn Header="Acties" Width="150">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <Button Content="✏️" ToolTip="Bewerken" 
                                                   Click="EditGenreButton_Click"
                                                   Tag="{Binding}"
                                                   Margin="2"/>
                                            <Button Content="🗑️" ToolTip="Verwijderen" 
                                                   Click="DeleteGenreButton_Click"
                                                   Tag="{Binding}"
                                                   Margin="2"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>

            <!-- Admin Tab -->
            <TabItem x:Name="AdminTabItem" Header="👥 Gebruikers" Style="{StaticResource TabItemStyle}" Visibility="Collapsed">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Title -->
                    <TextBlock Grid.Row="0" Text="Gebruikers Beheer" Style="{StaticResource TitleStyle}"/>

                    <!-- Action Bar -->
                    <Border Grid.Row="1" Margin="0,10,0,10" Padding="10" Background="#ECF0F1" CornerRadius="5">
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <Button Content="👥 Beheer Rollen" 
                                   Style="{StaticResource PrimaryButtonStyle}"
                                   Click="ManageRolesButton_Click"/>
                        </StackPanel>
                    </Border>

                    <!-- Users DataGrid -->
                    <DataGrid Grid.Row="2" x:Name="UsersDataGrid" 
                             Style="{StaticResource DataGridStyle}"
                             AutoGenerateColumns="False"
                             CanUserAddRows="False"
                             IsReadOnly="True">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Volledige Naam" Binding="{Binding FullName}" Width="*"/>
                            <DataGridTextColumn Header="Email" Binding="{Binding Email}" Width="*"/>
                            <DataGridTextColumn Header="Gebruikersnaam" Binding="{Binding UserName}" Width="*"/>
                            <DataGridTextColumn Header="Laatste Login" Binding="{Binding LastLoginDate, StringFormat='{}{0:dd/MM/yyyy HH:mm}'}" Width="150"/>
                            <DataGridCheckBoxColumn Header="Geblokkeerd" Binding="{Binding IsDeleted}" Width="100"/>
                            <DataGridTemplateColumn Header="Acties" Width="150">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <Button Content="🔒" ToolTip="Blokkeren/Deblokkeren" 
                                                   Click="ToggleBlockUserButton_Click"
                                                   Tag="{Binding}"
                                                   Margin="2"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>
        </TabControl>
    </DockPanel>
</Window>
